<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>World Population Visualization - HEALPix 3D</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      overflow: hidden;
      font-family: system-ui, -apple-system, sans-serif;
    }

    canvas {
      display: block;
    }

    #infoCard {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(0, 0, 0, 0.95);
      color: white;
      font-size: 16px;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      line-height: 1.6;
      z-index: 1000;
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      #infoCard {
        font-size: 14px;
        padding: 20px;
        max-height: 85vh;
      }

      #infoCard h2 {
        font-size: 20px;
        margin-bottom: 12px;
      }

      #infoCard p {
        margin: 0 0 10px 0;
      }

      .citation {
        margin-top: 15px;
        padding: 12px;
        font-size: 12px;
      }
    }

    #infoCard h2 {
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 24px;
      font-weight: bold;
      color: #4ecdc4;
    }

    #infoCard p {
      margin: 0 0 12px 0;
    }

    #infoCard a {
      color: #4ecdc4;
      text-decoration: none;
    }

    #infoCard a:hover {
      text-decoration: underline;
    }

    #loadingStatus {
      margin-top: 20px;
      text-align: center;
      color: #4ecdc4;
      font-weight: bold;
    }

    #populationInfo {
      margin-top: 10px;
      text-align: center;
      color: #888;
      font-size: 14px;
    }

    .small-text {
      font-size: 14px;
      color: #aaa;
    }

    .citation {
      margin-top: 20px;
      padding: 15px;
      background-color: rgba(255, 255, 255, 0.05);
      border-left: 3px solid #4ecdc4;
      border-radius: 4px;
      font-size: 13px;
    }

    .citation strong {
      color: #4ecdc4;
    }
  </style>
</head>
<body>
  <div id="infoCard">
    <h2>üåç World Population Visualization</h2>
    <div id="cardContent">
      <p>This visualization shows the 2024 world population distribution. Each glowing particle (mote) is randomly sampled from the global population, with denser regions spawning more motes.</p>

      <p><strong>Challenge:</strong> Can you identify the continents using as few motes as possible? Try reducing the mote count with the dropdown selector and see if you can still recognize the major landmasses. Switch to "Boxes" mode to check your guess‚Äîeach box represents a <a href="https://healpix.sourceforge.io/" target="_blank">HEALPix</a> region (nside=64) with height proportional to population density.</p>

      <p class="small-text"><strong>Technical Details:</strong> Motes are sampled from HEALPix cells (nside=64) weighted by population. Each box extends from radius 1 (Earth's surface) to an outer radius: <code>r = (1 + 3p/(CA))^(1/3)</code>, where p is the population, A is the HEALPix pixel area, and C is a scaling constant.</p>

      <div class="citation">
        <strong>Data Source:</strong><br>
        WorldPop Global Demographic Data Project - Population Distribution (2024 estimates)<br>
        <a href="https://www.worldpop.org/" target="_blank">https://www.worldpop.org/</a><br><br>
        <strong>Citation:</strong><br>
        Bondarenko M., Priyatikanto R., Tejedor-Garavito N., Zhang W., McKeen T., Cunningham A., Woods T., Hilton J., Cihan D., Nosatiuk B., Brinkhoff T., Tatem A., Sorichetta A. 2025. The spatial distribution of population in 2015-2030 at a resolution of 30 arc (approximately 1km at the equator) R2025A version v1. WorldPop - School of Geography and Environmental Science, University of Southampton. DOI:10.5258/SOTON/WP00845
      </div>

      <div id="loadingStatus">Initializing...</div>
      <div id="populationInfo"></div>
    </div>
  </div>
  <script type="module" src="/src/population-demo.js"></script>
</body>
</html>
