<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>World Population Visualization - HEALPix 3D</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div id="infoCard">
    <h2>üåç World Population Visualization</h2>
    <div id="cardContent">
      <p>This visualization shows the 2024 world population distribution. Each glowing particle (mote) is randomly sampled from the global population, with denser regions spawning more motes.</p>

      <p><strong>Challenge:</strong> Start with 150 motes and gradually increase the count until you think you can identify the continents. How few motes do you need to recognize the major landmasses? Once you've made your guess, switch to "Boxes" mode to check‚Äîeach box represents a <a href="https://healpix.sourceforge.io/" target="_blank">HEALPix</a> region (nside=64) with height proportional to population density.</p>

      <p class="small-text"><strong>Technical Details:</strong> Motes are sampled from HEALPix cells (nside=64) weighted by population. Each box extends from radius 1 (Earth's surface) to an outer radius: <code>r = (1 + 3p/(CA))^(1/3)</code>, where p is the population, A is the HEALPix pixel area, and C is a scaling constant.</p>

      <div class="citation">
        <strong>Data Source:</strong><br>
        WorldPop Global Demographic Data Project - Population Distribution (2024 estimates)<br>
        <a href="https://www.worldpop.org/" target="_blank">https://www.worldpop.org/</a><br><br>
        <strong>Citation:</strong><br>
        Bondarenko M., Priyatikanto R., Tejedor-Garavito N., Zhang W., McKeen T., Cunningham A., Woods T., Hilton J., Cihan D., Nosatiuk B., Brinkhoff T., Tatem A., Sorichetta A. 2025. The spatial distribution of population in 2015-2030 at a resolution of 30 arc (approximately 1km at the equator) R2025A version v1. WorldPop - School of Geography and Environmental Science, University of Southampton. DOI:10.5258/SOTON/WP00845
      </div>

      <div id="loadingStatus">Initializing...</div>
      <div id="populationInfo"></div>
    </div>
  </div>
  
  <!-- About button (initially hidden) -->
  <button id="aboutButton" style="display: none;">About</button>
  
  <!-- Mote count selector (initially hidden) -->
  <select id="moteCountSelector" style="display: none;">
    <option value="150" selected>150 motes</option>
    <option value="300">300 motes</option>
    <option value="600">600 motes</option>
    <option value="1200">1200 motes</option>
  </select>
  
  <!-- Relief control slider (initially hidden) -->
  <div id="reliefControl" class="control-panel">
    <span>Relief:</span>
    <input type="range" id="reliefSlider" min="0" max="100" value="100">
    <span id="reliefValue">1.00</span>
  </div>
  
  <!-- Mote size control slider (initially hidden) -->
  <div id="sizeControl" class="control-panel">
    <span>Mote size:</span>
    <input type="range" id="sizeSlider" min="10" max="100" value="50">
    <span id="sizeValue">1.00</span>
  </div>
  
  <!-- Mode toggle control (initially hidden) -->
  <div id="modeControl" class="control-panel">
    <span>Mode:</span>
    <div class="radio-group">
      <label>
        <input type="radio" name="vizMode" value="pyramids">
        <span>Boxes</span>
      </label>
      <label>
        <input type="radio" name="vizMode" value="dust" checked>
        <span>Dust</span>
      </label>
    </div>
  </div>
  
  <script type="module" src="/src/population-demo.js"></script>
</body>
</html>
